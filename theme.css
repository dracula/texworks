/* 
 * Original Work: darkbg.css from texworks-dark-theme (https://github.com/ezellohar/texworks-dark-theme)
 * Original copyright © GitHub user ezellohar
 * Modifications by Wᴏɴɢ Chung, 2025-05-13 (1st modification)
 * Licensed under GNU General Public License v3.0 (GPL-3.0)
 */

/* 
 * QWidget:
 *     Main interface colors
 *     主界面颜色
 */
QWidget {
    background-color: #282a36;
    color: #f8f8f2;
	selection-background-color: #44475a;
	selection-color: #f8f8f2;
}

/* 
 * QTextEdit:
 *     The actual text editor window
 *     文本编辑器窗口
 */
QTextEdit {
    background-color: #282a36;  
    color: #f8f8f2;
	selection-background-color: #44475a;
	selection-color: #f8f8f2;
    border-top: 1px solid #6272a4;
    border-bottom: 1px solid #6272a4;
}

/* 
 * QComboBox:
 *     It refers to drop-down menus (such as when selecting pdfTeX, pdfLaTeX, XeTeX, etc.)
 *     下拉菜单(如选择pdfTeX/pdfLaTeX/XeTeX等)
 */
QComboBox {
    border: 1px outset #6272a4;
    padding: 2px 18px 4px 6px;
    border-radius: 4px;
}

QComboBox:hover {
    color: #8be9fd;
}

QComboBox:on {
    color: #f8f8f2;
}

/* 
 * drop-down:
 *     The drop-arrow frame
 *     下拉箭头区域
 */
QComboBox::drop-down {
    subcontrol-origin: padding;
    subcontrol-position: top right;
    width: 20px;
    border-left: 1px outset #6272a4;
}

QComboBox::drop-down:hover {
    background-color: #44475a;
}

/* 
 * The drop-arrow frame that is currently in use
 * 按下状态的下拉箭头区域
 */
QComboBox::drop-down:on {
    background-color: #44475a;
    border-style: inset;
}

/* 
 * The drop-down arrow icon
 * 下拉箭头图标
 */
QComboBox::down-arrow {
    image: url(./src/down-arrow.png);
	width: 16px;
	height: 16px;
}

/* 
 * The menu once opened
 * 展开后的下拉菜单
 */
QComboBox QAbstractItemView {
    outline: 0px; /* Prohibit drawing the focus box 禁止Qt自动绘制焦点框 */
    border: 1px solid #6272a4;
	background-color: #282a36;
}

QComboBox QAbstractItemView::item:selected, QComboBox QAbstractItemView::item:hover {
    color: #8be9fd;
	background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

/* 
 * QMenuBar:
 *     It refers to the menu at the top (File, Edit, etc.)
 *     顶部菜单栏(文件/编辑等)
 * QMenu::item 
 *     It refers to the items under the menu
 *     下拉菜单项
 */
QMenuBar::item:pressed, QMenuBar::item:selected {
    color: #8be9fd;
    background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

QMenu {
    border: 1px solid #6272a4;
}

QMenu::item:selected, QMenu::item:hover {
    color: #8be9fd;
    background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

/* 
 * QScrollBar:
 *     handles scroll bars. It must be doubled for vertical and horizontal
 *     滚动条控件(需分别设置垂直/水平)
 * handle:
 *     It is the moving part
 *     滑块部分
 * add-line (or sub-line):
 *     The region where the arrow is drawn. If no image is embedded, the arrow is a dot.
 *     下滑箭头所在区域(若无图片则显示圆点)
 */
QScrollBar:vertical {
    width: 16px;
    margin: 16px 3px 16px 3px;
    border-radius: 5px;
}

QScrollBar:vertical:hover {
    background: #44475a;
}

QScrollBar::handle:vertical {
    background-color: #6272a4;
    border-radius: 5px;
    min-height: 20px;
}

QScrollBar::handle:vertical:hover {
    background-color: #8be9fd;
}

/* 
 * This seems useless, but it is actually quite important
 * --it makes the scroll bar's background a uniform color instead of tiny dots, if it were removed.
 * 此属性看似无用，实则关键——移除后滚动条背景会变成散点而非纯色
 */
QScrollBar::add-page:vertical, QScrollBar::sub-page:vertical { 
    background: none;
}

QScrollBar::add-line:vertical {
    subcontrol-origin: margin;
    subcontrol-position: bottom; /* sliding-down botton 下滑按钮*/
    border-radius: 8px;
    height: 16px;
}

QScrollBar::sub-line:vertical {
    subcontrol-origin: margin;
    subcontrol-position: top; /* sliding-up botton 上滑按钮*/
    border-radius: 8px;
    height: 16px;
}

QScrollBar::add-line:vertical:hover, QScrollBar::sub-line:vertical:hover {
	background-color: #44475a;
}

QScrollBar::up-arrow:vertical {
    image: url(./src/up-arrow.png);
	width: 12px;
	height: 12px;
}

QScrollBar::down-arrow:vertical {
    image: url(./src/down-arrow.png);
	width: 12px;
	height: 12px;
}

QScrollBar::up-arrow:vertical:hover {
    image: url(./src/up-arrow-2.png);
}

QScrollBar::down-arrow:vertical:hover {
    image: url(./src/down-arrow-2.png);
}

/* 
 * Horizontal scroll bar
 * 水平滚动条
 */
QScrollBar:horizontal {
    height: 16px;
    margin: 3px 16px 3px 16px;
    border-radius: 5px;
}

QScrollBar:horizontal:hover {
    background: #44475a;
}

QScrollBar::handle:horizontal {
    background-color: #6272a4;
    border-radius: 5px;
    min-width: 20px;
}

QScrollBar::handle:horizontal:hover {
    background-color: #8be9fd;
}

QScrollBar::add-page:horizontal, QScrollBar::sub-page:horizontal { 
    background: none;
}

QScrollBar::add-line:horizontal {
    subcontrol-origin: margin;
    subcontrol-position: right; /* sliding-right botton 右滑按钮*/
    border-radius: 8px;
    width: 16px;
}

QScrollBar::sub-line:horizontal {
    subcontrol-origin: margin;
    subcontrol-position: left; /* sliding-left botton 左滑按钮*/
    border-radius: 8px;
    width: 16px;
}

QScrollBar::add-line:horizontal:hover, QScrollBar::sub-line:horizontal:hover {
	background: #44475a;
}

QScrollBar:left-arrow:horizontal {
    image: url(./src/left-arrow.png);
	width: 12px;
	height: 12px;
}

QScrollBar::right-arrow:horizontal {
    image: url(./src/right-arrow.png);
	width: 12px;
	height: 12px;
}

QScrollBar:left-arrow:horizontal:hover {
    image: url(./src/left-arrow-2.png);
}

QScrollBar::right-arrow:horizontal:hover {
    image: url(./src/right-arrow-2.png);
}

/* 
 * QSizeGrip:
 *     Corner image to resize window
 *     窗口缩放角标
 */
QSizeGrip {
	image: url(./src/size-grip.png);
	width: 12px;
	height: 12px;
	background: none;
}

/* 
 * QTabWidget:
 *     The tab bar frame, needed for QTabBar styling
 *     标签页容器框架
 */
QTabWidget::pane {
    border: 1px solid #6272a4;
}

QTabWidget::tab-bar {
    left: 5px; /* Move to the right by 5px 向右偏移5像素 */
}

/* 
 * Buttons in prefs menu. It styles also the console close button if not specified
 * 偏好设置中的按钮(未单独指定时也会影响控制台关闭按钮)
 */
QTabWidget QToolButton {
	background-color: #282a36;
	margin: 2px;
	padding: 1px;
}

QTabWidget QToolButton:hover {
    background-color: #44475a;
}

/* 
 * QGroupBox:
 *     Group box frames with a title and child widgets
 *     带有标题和子部件的分组框架控件
 */
QGroupBox {
    border: 1px solid #6272a4;
    padding-top: 20px;
}

QGroupBox::title {
    subcontrol-position: top center;
    color: #8be9fd;
    background-color: #282a36;
    border: 1px solid #6272a4;
    border-top: 2.5px solid #ff79c6;
    border-bottom-right-radius: 12px;
    border-bottom-left-radius: 12px;
    min-width: 10ex;
    padding: 2px 48px 2px 48px;
}

/*
 * QTabBar:
 *      Tabs (preferences, console output)
 *      选项卡(首选项，控制台输出)
 */
QTabBar::tab {
    background-color: #282a36;
    border: 1px solid #6272a4;
	border-bottom-color: #282a36; /* Same as pane color 与窗格颜色相同 */
    border-top-right-radius: 8px;
    border-top-left-radius: 8px;
    min-width: 8ex;
    padding: 4px 8px 4px 8px;
}

QTabBar::tab:selected {
	color: #8be9fd;
    background-color: #282a36;
    border-bottom: 2.5px solid #ff79c6; /* Same as pane color 与窗格颜色相同 */
}

QTabBar::tab:hover {
	color: #8be9fd;
    background-color: #44475a;
    top: 4px; /* Move to the down by 4px 向下偏移4像素 */
}

/* 
 * Make non-selected tabs look smaller
 * 使未选定的选项卡看起来更小
 */
QTabBar::tab:!selected {
    margin-top: 4px;
}

/* 
 * Tw--UI--ClosableTabWidget QToolButton:
 *     Close button on Closable Tabs
 *     可关闭标签页上的关闭按钮
 */
Tw--UI--ClosableTabWidget QToolButton {
    qproperty-icon: url(./src/close.png); /* image tag not working 不运行的图像标签 */
    background-color: #282a36;
}

Tw--UI--ClosableTabWidget QToolButton:hover {
    background-color: #ff5555;
}

/* 
 * QDockWidget:
 *     Dockable window controls (such as Tags and Search results)
 *     可停靠窗口控件(比如“标签”和“搜索结果”)
 */
QDockWidget {
	titlebar-close-icon: url(./src/close.png);
    titlebar-normal-icon: url(./src/undock.png);
}

QDockWidget::title {
    background-color: #282a36;
    padding-left: 5px;
}

QDockWidget::close-button, QDockWidget::float-button {
    border: none;
    background-color: #282a36;
}

QDockWidget::float-button:hover {
    background-color: #44475a;
}

QDockWidget::close-button:hover {
    background-color: #ff5555;
}

/* 
 * QTreeView:
 *     Side bar of Outlines that looks like Tree Structure (Tags)
 *     文档大纲所在的形如树状结构的侧栏(标签)
 * branch:
 *     Branches that can fold (or Expand) items
 *     可折叠(或展开)子项的分支
 */
QTreeView {
    border: 1px solid #6272a4;
}

QTreeView::item:has-children {
    color: #ffb86c; /* This marks parent items 标注父条目*/
}

QTreeView::item:selected, QTreeView::item:hover {
    color: #8be9fd;
    background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

QTreeView::branch {
    background-color: #282a36;
}

QTreeView::branch:closed:has-children {
    image: url(./src/collapse.png);
}

QTreeView::branch:open:has-children {
    image: url(./src/expand.png);
}

QTreeView::branch:closed:has-children:hover {
    image: url(./src/collapse-2.png);
    background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

QTreeView::branch:open:has-children:hover {
    image: url(./src/expand-2.png);
    background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

/* 
 * QTableView:
 *     Table view control (Search results)
 *     表格视图控件(搜索结果)
 * QHeaderView:
 *     The title bar of the table view control (search results)
 *     表格视图控件的标题栏(搜索结果)
 */
QTableView {
    outline: 0px;
    background-color: #282a36;
    border: 1px solid #6272a4;
    alternate-background-color: #282a36;
    selection-background-color: #44475a;
}

QTableView::item:selected:focus, QTableView::item:hover {
    color: #8be9fd;
    background-color: #44475a;
    margin: 1px;
    border-radius: 4px;
}

QTableView::item:selected:!focus {
    color: #f8f8f2;
    background-color: #44475a;
}

QHeaderView::section {
    font-weight: bold;
    text-align: center;
	background-color: #6272a4;
}

QHeaderView::section:pressed, QHeaderView::section:hover {
    color: #8be9fd;
	background-color: #44475a;
}

/* 
 * QToolBar:
 *     Tool Bar (under menu)
 *     工具栏(在菜单下)
 * QToolButton:
 *     Buttons with images on the Tool Bar
 *     工具栏上带图像的按钮
 */
QToolBar {
    border-top: 1px solid #6272a4;
}

QToolButton:hover {
    background-color: #44475a;
}

/* 
 * QPushButton:
 *     Buttons with text (ok, cancel...)
 *     带文本的按钮(确定，取消...)
 */
QPushButton {
    background-color: #282a36;
    border: 1px outset #6272a4;
    padding: 4px;
    border-radius: 4px;
}

QPushButton:hover {
    color: #8be9fd;
	background-color: #44475a;
}

QPushButton:pressed {
    color: #8be9fd;
	background-color: #44475a;
    border-style: inset;
}

/* 
 * Tw--UI--ScreenCalibrationWidget:
 *     Screen DPI control (Preferences -> Preview -> Screen Resolution)
 *     屏幕 DPI 控件(首选项 -> 预览 -> 屏幕分辨率)
 */
Tw--UI--ScreenCalibrationWidget {
	color: #f8f8f2;
	background-color: #44475a;
}